- Exploitation consists of techniques and tools used by adversaries/penetration testers to gain an initial foothold on a target system or network.
- Successful exploitation will heavily depend on the nature and quality of information gathering and service enumeration performed on the target.
	- We can only exploit a target if we know what is vulnerable
- So far, we have covered exploitation of Windows and Linux systems both manually and automatically, however, we still need to get a clearer picture of the exploitation methodology and the tools and techniques involved in the process.

Penetration testing execution standard

The penetration testing execution standard (PTES) is a penetration testing methodology that was developed by a team of information security practitioners with the aim of addressing the need for a comprehensive and up to date standard for penetration testing.

Penetration testing phases

1. Information Gathering
2. Enumeration
3. Exploitation
	1. Identify vulnerable services
	2. Identify and prepare exploit code
	3. Gaining Access
		1. Automated - MSF
		2. Manual
	4. Obtain remote access on target system
	5. Bypass AV detection
	6. Pivot on to other systems
4. Post Exploitation
	1. Privilege escalation
	2. Maintaining persistence
	3. Clearing tracks

- Scearching for publicly available exploits
	- After identifying a potential vulnerability within a target or a service running on a target, the next logical step will involve searching for exploit code that can be used to exploit the vulnerability
	- Exploit code can be easily be found online, however, it is important to note that downloading and running exploit code against a target can be quite dangerous. It is therefore recommended to analyze the exploit code closely to ensure that it works as intended.
	- There are a handful of legitimate and vetted exploit databases that you should use when searching for exploits online:
		- Exploit-db
		- Rapid7
		- packet storm (Not recommended by we can give it a try)
	
- Searching exploits with searchsploit
	- In certain cases, you may not have access to online exploits and as a result, you must be able to use the exploit sources available locally/offline.
	- The entire exploit-db database of exploits comes pre packaged with kalilinux, consequently providing you with all exploits locally.
	- The Exploit-db offline database of exploits can be accessed and queried with a tool called searchsploit.
		- Installing the exploitdb package incase if it is not installed already the command is as follows
			- `sudo apt-get update && sudo apt-get install exploitdb -y`
		- Once the installation done we will be able to get all the exploit code locally in the folder /usr/share/exploitdb/
		- But it is difficult for us to search all the exploits even with the grep or other similar commands
		- In order to resolve this we have another tool called searchsploit

```
┌──(kali㉿kali)-[~]
└─$ searchsploit         
  Usage: searchsploit [options] term1 [term2] ... [termN]

==========
 Examples 
==========
  searchsploit afd windows local
  searchsploit -t oracle windows
  searchsploit -p 39446
  searchsploit linux kernel 3.2 --exclude="(PoC)|/dos/"
  searchsploit -s Apache Struts 2.0.0
  searchsploit linux reverse password
  searchsploit -j 55555 | jq
  searchsploit --cve 2021-44228

  For more examples, see the manual: https://www.exploit-db.com/searchsploit

=========
 Options 
=========
## Search Terms
   -c, --case     [term]      Perform a case-sensitive search (Default is inSEnsITiVe)
   -e, --exact    [term]      Perform an EXACT & order match on exploit title (Default is an AND match on each term) [Implies "-t"]
                                e.g. "WordPress 4.1" would not be detect "WordPress Core 4.1")
   -s, --strict               Perform a strict search, so input values must exist, disabling fuzzy search for version range
                                e.g. "1.1" would not be detected in "1.0 < 1.3")
   -t, --title    [term]      Search JUST the exploit title (Default is title AND the file's path)
       --exclude="term"       Remove values from results. By using "|" to separate, you can chain multiple values
                                e.g. --exclude="term1|term2|term3"
       --cve      [CVE]       Search for Common Vulnerabilities and Exposures (CVE) value

## Output
   -j, --json     [term]      Show result in JSON format
   -o, --overflow [term]      Exploit titles are allowed to overflow their columns
   -p, --path     [EDB-ID]    Show the full path to an exploit (and also copies the path to the clipboard if possible)
   -v, --verbose              Display more information in output
   -w, --www      [term]      Show URLs to Exploit-DB.com rather than the local path
       --id                   Display the EDB-ID value rather than local path
       --disable-colour       Disable colour highlighting in search results

## Non-Searching
   -m, --mirror   [EDB-ID]    Mirror (aka copies) an exploit to the current working directory
   -x, --examine  [EDB-ID]    Examine (aka opens) the exploit using $PAGER

## Non-Searching
   -h, --help                 Show this help screen
   -u, --update               Check for and install any exploitdb package updates (brew, deb & git)

## Automation
       --nmap     [file.xml]  Checks all results in Nmap's XML output with service version
                                e.g.: nmap [host] -sV -oX file.xml

=======
 Notes 
=======
 * You can use any number of search terms
 * By default, search terms are not case-sensitive, ordering is irrelevant, and will search between version ranges
   * Use '-c' if you wish to reduce results by case-sensitive searching
   * And/Or '-e' if you wish to filter results by using an exact match
   * And/Or '-s' if you wish to look for an exact version match
 * Use '-t' to exclude the file's path to filter the search results
   * Remove false positives (especially when searching using numbers - i.e. versions)
 * When using '--nmap', adding '-v' (verbose), it will search for even more combinations
 * When updating or displaying help, search terms will be ignored
```

- In order for us to use searchsploit first we need to update the package and the command for that would be `searchsploit -u` incase if it is a first start it will most likely download about 2.5 to 3GB exploit codes on to your system which later on we can try to use. It is totally different from the exploitdb that we used earlier

![[Pasted image 20230810004659.png]]

Being as much specific as you can while you are searching for the exploit code in searchsploit. By doing so the codes that we are looking for will be easier to find. Getting the exploit code on to the current folder incase if you find `searchsploit -m file_id` from the seatch results we can see in the path the id.

![[Pasted image 20230810010112.png]]

Case sensitive search can be done use the -c and most of the cases it is not useful. Use only when you have to.
Title search => `searchsploit -t vsftpd`
using the exact search => `searchsploit -e "Windows XP"`
using filters from the exploitdb website the filters are Type,Platform,Port,Service => `searchsploit remote windows smb` we are looking for remote exploits we can perform on windows using the SMB service.