- SMTP (Simple Mail Transfer Protocol) is a communication protocol that is used for the transmission of email.
- SMTP uses TCP port 25 by default. It can also be configured to run on TCP port 465 and 587.
- Haraka is an open source high performance SMTP server developed in Node.js
- The Haraka SMTP server comes with a plugin for processing attachments. Haraka versions prior to V2.8.9 are vulnerable to command injection.

```
root@attackdefense:~# ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.1.0.3  netmask 255.255.0.0  broadcast 10.1.255.255
        ether 02:42:0a:01:00:03  txqueuelen 0  (Ethernet)
        RX packets 78  bytes 7991 (7.8 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 82  bytes 311850 (304.5 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.71.123.2  netmask 255.255.255.0  broadcast 192.71.123.255
        ether 02:42:c0:47:7b:02  txqueuelen 0  (Ethernet)
        RX packets 16  bytes 1416 (1.3 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 18  bytes 1656 (1.6 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 18  bytes 1656 (1.6 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

root@attackdefense:~# ping -c 5 192.71.123.3
PING 192.71.123.3 (192.71.123.3) 56(84) bytes of data.
64 bytes from 192.71.123.3: icmp_seq=1 ttl=64 time=0.104 ms
64 bytes from 192.71.123.3: icmp_seq=2 ttl=64 time=0.051 ms
64 bytes from 192.71.123.3: icmp_seq=3 ttl=64 time=0.065 ms
64 bytes from 192.71.123.3: icmp_seq=4 ttl=64 time=0.062 ms
64 bytes from 192.71.123.3: icmp_seq=5 ttl=64 time=0.022 ms

--- 192.71.123.3 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 101ms
rtt min/avg/max/mdev = 0.022/0.060/0.104/0.028 ms
```

```
root@attackdefense:~# service postgresql start 
[ ok ] Starting PostgreSQL 11 database server: main.
root@attackdefense:~# msfconsole
       =[ metasploit v5.0.18-dev                          ]
+ -- --=[ 1882 exploits - 1062 auxiliary - 328 post       ]
+ -- --=[ 546 payloads - 44 encoders - 10 nops            ]
+ -- --=[ 2 evasion                                       ]

msf5 > db_status
[*] Connected to msf. Connection type: postgresql.
msf5 > workspace -a smtp
[*] Added workspace: smtp
[*] Workspace: smtp
msf5 > setg RHOSTS 192.71.123.3
RHOSTS => 192.71.123.3
msf5 > setg RHOST 192.71.123.3
RHOST => 192.71.123.3
msf5 >
```

```

```